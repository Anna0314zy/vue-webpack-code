{"remainingRequest":"/usr/local/lib/node_modules/@vue/cli-service-global/node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!/Users/liangyuan/Downloads/珠峰/02.vue全家桶/vue全家桶/Vue全家桶/2019版/9.swiper-vue/components/Swiper.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liangyuan/Downloads/珠峰/02.vue全家桶/vue全家桶/Vue全家桶/2019版/9.swiper-vue/components/Swiper.vue","mtime":1573137162000},{"path":"/usr/local/lib/node_modules/@vue/cli-service-global/node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js","mtime":499162500000},{"path":"/usr/local/lib/node_modules/@vue/cli-service-global/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/local/lib/node_modules/@vue/cli-service-global/node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsgLy8gY29tcG9zaXRpb25BcGkKICBwcm9wczogewogICAgYXV0b3BsYXk6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfSwKICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogIiIKICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4geyBjdXJyZW50U2VsY3RlZDogIiIsIGxlbjogMCB9OwogIH0sCiAgbWV0aG9kczogewogICAgdG91Y2hzdGFydChlKSB7CiAgICAgIHRoaXMubW91c2VlbnRlcigpOyAvLyDlgZzmraLmu5rliqgKICAgICAgdGhpcy5zdGFydFggPSBlLnRvdWNoZXNbMF0uY2xpZW50WDsKICAgIH0sCiAgICB0b3VjaG1vdmUoKSB7CiAgICAgIGNvbnNvbGUubG9nKCLnp7vliqgiKTsKICAgIH0sCiAgICB0b3VjaGVuZChlKSB7CiAgICAgICBsZXQgZW5kWCA9ICBlLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFg7CiAgICAgICBsZXQgZGlzdGFuY2UgPSBlbmRYIC0gdGhpcy5zdGFydFg7CgogICAgICAgLy8g5pu05Lil5qC855qE5Yik5patCiAgICAgICBpZihkaXN0YW5jZSA8IDApewogICAgICAgICAgIHRoaXMuc2VsZWN0KHRoaXMuYWN0aXZlKzEpCiAgICAgICB9ZWxzZXsKICAgICAgICAgICB0aGlzLnNlbGVjdCh0aGlzLmFjdGl2ZS0gMSkKICAgICAgIH0KICAgICAgIHRoaXMucnVuKCk7IC8vIOW9k+S9jee9ruWPmOWMluWQjiDov5jpnIDopoHnu6fnu63lvIDlkK/lrprml7blmagKICAgIH0sCiAgICBzZWxlY3QobmV3SW5kZXgpIHsKICAgICAgLy/lj6/ku6XmjqfliLbliIfmjaLlip/og70KICAgICAgLy8g54K55Ye7ZG90cyDml7Yg5Lya6Kem5Y+R5a+55bqU55qE5pu05paw5LqL5Lu2CgogICAgICB0aGlzLnByZXZQb3NpdGlvbiA9IHRoaXMuYWN0aXZlOyAvLyDlvZPpgInmi6nml7YKCiAgICAgIGlmIChuZXdJbmRleCA9PT0gdGhpcy5uYW1lcy5sZW5ndGgpIG5ld0luZGV4ID0gMDsgLy8g5YGa5bem5Y+z54K55Ye7CiAgICAgIGlmIChuZXdJbmRleCA9PT0gLTEpIG5ld0luZGV4ID0gdGhpcy5uYW1lcy5sZW5ndGggLSAxOwogICAgICB0aGlzLiRlbWl0KCJpbnB1dCIsIHRoaXMubmFtZXNbbmV3SW5kZXhdKTsgLy8g5pS55Y+Y5ZCO5Y+R5bCE5Y2z5Y+vCiAgICB9LAogICAgbW91c2VlbnRlcigpIHsKICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTsKICAgICAgdGhpcy50aW1lciA9IG51bGw7CiAgICB9LAogICAgbW91c2VsZWF2ZSgpIHsKICAgICAgLy8g5aaC5p6c5pyJdGltZXIgIOihqOekuuW3sue7j+WcqOi3keS6hiDlsLHkuI3nrqHkuoYKICAgICAgaWYgKCF0aGlzLnRpbWVyKSB7CiAgICAgICAgdGhpcy5ydW4oKTsKICAgICAgfQogICAgfSwKICAgIHNob3dDaGlsZCgpIHsKICAgICAgLy8g5YiH5o2i5pi+56S657uE5Lu2CiAgICAgIC8vIOmcgOimgeiOt+WPluW9k+WJjeS7juiwgeW8gOWniyDku47lk6rkuKpuYW1l5bGe5oCn5byA5aeLCiAgICAgIHRoaXMuY3VycmVudFNlbGN0ZWQgPSB0aGlzLnZhbHVlIHx8IHRoaXMuJGNoaWxkcmVuWzBdLm5hbWU7CiAgICAgIC8vIDEpIOiuqeWvueW6lOeahOWEv+WtkOaYvuekuiDlhbbku5bkurrpmpDol48KICAgICAgdGhpcy4kY2hpbGRyZW4uZm9yRWFjaCh2bSA9PiB7CiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgLy8g5oiR5Lus6ZyA6KaB5pu05pS55a6M5q+VIOaYr+ato+WQkeeahOi/mOaYr+WPjeWQkeeahCDlho3ljrvmm7TmlrDop4blm74KICAgICAgICAgIHZtLnNlbGVjdGVkID0gdGhpcy5jdXJyZW50U2VsY3RlZDsgLy8g6Lef5a2Q57uE5Lu26K+06YKj5Liq6ZyA6KaB5Yqg6L29CiAgICAgICAgfSk7CgogICAgICAgIC8vIOimgei3n+WEv+WtkOivtCDkvaDmmK/mraPnnYDotbDov5jmmK/lj43nnYDotbAKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAxICAgICAgICAyCiAgICAgICAgbGV0IHJldmVyc2UgPSB0aGlzLnByZXZQb3NpdGlvbiA+IHRoaXMuYWN0aXZlID8gdHJ1ZSA6IGZhbHNlOwogICAgICAgIC8vIOWSjCDlrZDoioLngrnor7Qg5piv5q2j55qE6L+Y5piv5Y+N55qECiAgICAgICAgdm0ucmV2ZXJzZSA9IHJldmVyc2U7CgogICAgICAgIC8vIOiAg+iZkeS4tOihl+WAvOeahOmXrumimAogICAgICAgIGlmICh0aGlzLnRpbWVyKSB7CiAgICAgICAgICAvLyDml6DnvJ3nmoTml7blgJkKICAgICAgICAgIGlmICh0aGlzLnByZXZQb3NpdGlvbiA9PT0gMCAmJiB0aGlzLmFjdGl2ZSA9PT0gdGhpcy5sZW4gLSAxKSB7CiAgICAgICAgICAgIHZtLnJldmVyc2UgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHRoaXMucHJldlBvc2l0aW9uID09PSB0aGlzLmxlbiAtIDEgJiYgdGhpcy5hY3RpdmUgPT09IDApIHsKICAgICAgICAgICAgdm0ucmV2ZXJzZSA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgcnVuKCkgewogICAgICBpZiAodGhpcy5hdXRvcGxheSkgewogICAgICAgIHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICAvLyDmiorntKLlvJXlvoDlkI7osIPmlbQgYm94MSBib3gyIOS5i+WQjuaKiuiwg+aVtOeahOe7k+aenCDlj5HpgIHnu5npnaIKICAgICAgICAgIC8vIOehruWumuW9k+WJjeaYr+esrOWHoOS4qgogICAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5hY3RpdmU7CiAgICAgICAgICBsZXQgbmV3SW5kZXggPSBpbmRleCAtIDE7CiAgICAgICAgICB0aGlzLnNlbGVjdChuZXdJbmRleCk7CiAgICAgICAgfSwgMzAwMCk7CiAgICAgIH0KICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBhY3RpdmUoKSB7CiAgICAgIC8vIGFjdGl2ZSDooajnpLrlvZPliY3mmK/nrKzlh6DkuKrnmoTntKLlvJUKICAgICAgcmV0dXJuIHRoaXMubmFtZXMuaW5kZXhPZih0aGlzLmN1cnJlbnRTZWxjdGVkKTsKICAgIH0KICB9LAogIGJlZm9yZURlc3Ryb3koKSB7CiAgICBjbGVhckludGVydmFsKHRoaXMudGltZXIpOwogIH0sCiAgd2F0Y2g6IHsKICAgIHZhbHVlKCkgewogICAgICB0aGlzLnNob3dDaGlsZCgpOwogICAgfQogIH0sCiAgLy8gcmVuZGVyCiAgbW91bnRlZCgpIHsKICAgIC8vIDEpIOWPquaJp+ihjOS4gOasoQogICAgdGhpcy5uYW1lcyA9IHRoaXMuJGNoaWxkcmVuLm1hcChjaGlsZCA9PiBjaGlsZC5uYW1lKTsKICAgIHRoaXMubGVuID0gdGhpcy5uYW1lcy5sZW5ndGg7IC8vIOiOt+WPluWEv+WtkOiKgueCueeahOS4quaVsAogICAgdGhpcy5zaG93Q2hpbGQoKTsgLy8gMSkg5pi+56S66buY6K6k55qE6IqC54K5CiAgICAvLyAy77yJIOiHquWKqOi9ruaSrQogICAgdGhpcy5ydW4oKTsKICAgIC8vIDMpIOaOp+WItuWKqOeUu+eahOaWueWQkQogICAgLy8g5YWI6K6w5b2V5b2T5YmN55qE5YC8CiAgICB0aGlzLnByZXZQb3NpdGlvbiA9IHRoaXMuYWN0aXZlOyAvLyDorrDlvZXliJrov5vmnaXnmoTlgLwKICB9Cn07Cg=="},{"version":3,"sources":["Swiper.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Swiper.vue","sourceRoot":"components","sourcesContent":["<template>\n  <div\n    class=\"swiper\"\n    @mouseenter=\"mouseenter\"\n    @mouseleave=\"mouseleave\"\n    @touchstart=\"touchstart\"\n    @touchmove=\"touchmove\"\n    @touchend=\"touchend\"\n  >\n    <div class=\"viewport\">\n      <slot></slot>\n    </div>\n    <!-- 点 dots -->\n    <div class=\"dots\">\n      <span\n        v-for=\"(item,index) in len\"\n        :key=\"index\"\n        :class=\"{active: active === index}\"\n        @click=\"select(index)\"\n      >{{item}}</span>\n    </div>\n    <div class=\"btn-list\">\n      <button @click=\"select(active-1)\">左边</button>\n      <button @click=\"select(active+1)\">右边</button>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default { // compositionApi\n  props: {\n    autoplay: {\n      type: Boolean,\n      default: true\n    },\n    value: {\n      type: String,\n      default: \"\"\n    }\n  },\n  data() {\n    return { currentSelcted: \"\", len: 0 };\n  },\n  methods: {\n    touchstart(e) {\n      this.mouseenter(); // 停止滚动\n      this.startX = e.touches[0].clientX;\n    },\n    touchmove() {\n      console.log(\"移动\");\n    },\n    touchend(e) {\n       let endX =  e.changedTouches[0].clientX;\n       let distance = endX - this.startX;\n\n       // 更严格的判断\n       if(distance < 0){\n           this.select(this.active+1)\n       }else{\n           this.select(this.active- 1)\n       }\n       this.run(); // 当位置变化后 还需要继续开启定时器\n    },\n    select(newIndex) {\n      //可以控制切换功能\n      // 点击dots 时 会触发对应的更新事件\n\n      this.prevPosition = this.active; // 当选择时\n\n      if (newIndex === this.names.length) newIndex = 0; // 做左右点击\n      if (newIndex === -1) newIndex = this.names.length - 1;\n      this.$emit(\"input\", this.names[newIndex]); // 改变后发射即可\n    },\n    mouseenter() {\n      clearInterval(this.timer);\n      this.timer = null;\n    },\n    mouseleave() {\n      // 如果有timer  表示已经在跑了 就不管了\n      if (!this.timer) {\n        this.run();\n      }\n    },\n    showChild() {\n      // 切换显示组件\n      // 需要获取当前从谁开始 从哪个name属性开始\n      this.currentSelcted = this.value || this.$children[0].name;\n      // 1) 让对应的儿子显示 其他人隐藏\n      this.$children.forEach(vm => {\n        this.$nextTick(() => {\n          // 我们需要更改完毕 是正向的还是反向的 再去更新视图\n          vm.selected = this.currentSelcted; // 跟子组件说那个需要加载\n        });\n\n        // 要跟儿子说 你是正着走还是反着走\n        //                      1        2\n        let reverse = this.prevPosition > this.active ? true : false;\n        // 和 子节点说 是正的还是反的\n        vm.reverse = reverse;\n\n        // 考虑临街值的问题\n        if (this.timer) {\n          // 无缝的时候\n          if (this.prevPosition === 0 && this.active === this.len - 1) {\n            vm.reverse = true;\n          }\n          if (this.prevPosition === this.len - 1 && this.active === 0) {\n            vm.reverse = false;\n          }\n        }\n      });\n    },\n    run() {\n      if (this.autoplay) {\n        this.timer = setInterval(() => {\n          // 把索引往后调整 box1 box2 之后把调整的结果 发送给面\n          // 确定当前是第几个\n          let index = this.active;\n          let newIndex = index - 1;\n          this.select(newIndex);\n        }, 3000);\n      }\n    }\n  },\n  computed: {\n    active() {\n      // active 表示当前是第几个的索引\n      return this.names.indexOf(this.currentSelcted);\n    }\n  },\n  beforeDestroy() {\n    clearInterval(this.timer);\n  },\n  watch: {\n    value() {\n      this.showChild();\n    }\n  },\n  // render\n  mounted() {\n    // 1) 只执行一次\n    this.names = this.$children.map(child => child.name);\n    this.len = this.names.length; // 获取儿子节点的个数\n    this.showChild(); // 1) 显示默认的节点\n    // 2） 自动轮播\n    this.run();\n    // 3) 控制动画的方向\n    // 先记录当前的值\n    this.prevPosition = this.active; // 记录刚进来的值\n  }\n};\n</script>\n\n<style lang=\"stylus\">\n.swiper {\n  margin: 0 auto;\n  border: 10px solid purple;\n}\n\n.viewport {\n  position: relative;\n  overflow: hidden;\n  height: 150px;\n}\n\n.dots {\n  display: flex;\n  justify-content: center;\n\n  span {\n    cursor: pointer;\n    width: 30px;\n    height: 30px;\n    text-align: center;\n    line-height: 30px;\n    border-radius: 50%;\n    border: 1px solid red;\n    margin: 0 10px;\n  }\n}\n\n.active {\n  background: red;\n  color: #fff;\n}\n</style>"]}]}